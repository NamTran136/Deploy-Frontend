import{c as N,r as a,a as L,A as P,t as b,j as e,L as y}from"./index-BSbp0FSU.js";import{S as B,M as E}from"./Menu-Y_NbBSX3.js";import{T as A}from"./Title-DvW9DyvO.js";import{P as C}from"./Pagination-Cu-JZCf2.js";import"./index-DRhXAqaf.js";const D=()=>{const{user:u,token:f}=N(s=>s.user),[p,r]=a.useState(!1),[c,x]=a.useState([]),[g,h]=a.useState(null),[m,d]=a.useState([]),[t,i]=a.useState(1),[o]=a.useState(12),[l,j]=a.useState(0);a.useEffect(()=>{S()},[]),a.useEffect(()=>{d(c.slice((t-1)*o,(t-1)*o+o))},[c]);const S=async()=>{r(!0),await L.get(P+b+`?email=${u.email}`,{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${f}`}}).then(s=>{const n=s.data;x(n),j(Math.ceil(n.length/o)),h(null)}).catch(s=>{h("Không có sách nào"),console.log(s)}).finally(()=>{r(!1)})};function k(s){s==="&laquo;"||s==="... "?i(1):s==="&lsaquo;"?t!==1&&i(t-1):s==="&rsaquo;"?t!==l&&i(t+1):s==="&raquo;"||s===" ..."?i(l):typeof s=="number"&&i(s)}return a.useEffect(()=>{d(c.slice((t-1)*o,(t-1)*o+o))},[t]),e.jsxs("div",{className:"allBook-container",children:[e.jsxs("div",{className:"allBook-content",children:[e.jsx(A,{text:"Sách yêu thích"}),p&&e.jsx("span",{children:"Loading..."}),g&&e.jsx("span",{className:"red mt-2",children:"Hiện tại chưa có sách yêu thích"}),e.jsx("div",{className:"list-book",children:m.length>0&&m.map((s,n)=>e.jsx("div",{className:"book-item",children:e.jsxs(y,{to:`/book/${s.id}`,children:[e.jsx("img",{src:s.imageUrl,alt:s.title}),e.jsx("div",{className:"",children:s.title})]})},n))}),e.jsx(C,{totalPages:l,page:t,limit:o,siblings:1,onPageChange:k})]}),e.jsx("div",{className:"sub-item-container",children:e.jsx(B,{})}),e.jsx("div",{className:"menu-container",children:e.jsx(E,{})})]})};export{D as default};
