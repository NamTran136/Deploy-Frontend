import{r as t,c as D,a as N,A,U as M,j as e,x as O,y as H,z as T,L as C,w as J}from"./index-BSbp0FSU.js";import{A as K,a as G}from"./AdminSidebarMobile-4DVHEuT3.js";import{F as X}from"./index-C9NtNJBW.js";import{P as Y}from"./Pagination-Cu-JZCf2.js";function Z({sortOrder:i,columnKey:h,sortKey:o,onClick:d}){return e.jsx("button",{onClick:d,className:`${o===h&&i==="desc"?"":"rotate-180"}`,children:e.jsx(X,{size:16})})}const _=[{Header:"S.No",value:"id"},{Header:"Username",value:"username"},{Header:"Email",value:"email"},{Header:"Avatar",value:"imageUrl"}],se=()=>{const[i,h]=t.useState(!1),[o,d]=t.useState(!1),{token:f}=D(s=>s.user),[k,b]=t.useState(!1),[x,S]=t.useState([]),[I,L]=t.useState(null),[u,P]=t.useState("asc"),[m,U]=t.useState("id"),[n,c]=t.useState(1),[l]=t.useState(4),[p,w]=t.useState(0);t.useEffect(()=>{y()},[]);const y=async()=>{b(!0),await N.get(A+M,{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${f}`}}).then(s=>s.data).then(s=>{S(s),w(Math.ceil(s.length/l))}).catch(s=>{L("List of Accounts unavailable"),console.log(s)}).finally(()=>{b(!1)})};function E(s){s==="&laquo;"||s==="... "?c(1):s==="&lsaquo;"?n!==1&&c(n-1):s==="&rsaquo;"?n!==p&&c(n+1):s==="&raquo;"||s===" ..."?c(p):typeof s=="number"&&c(s)}function R({tableData:s,sortKey:a,reverse:g}){if(!a)return s;const v=s.sort((z,B)=>z[a]>B[a]?1:-1);return g?v.reverse():v}const F=t.useCallback(()=>R({tableData:x,sortKey:m,reverse:u==="desc"}),[x,m,u]);function $(s){P(u==="asc"?"desc":"asc"),U(s)}const[r,j]=t.useState({input:"",index:"1"}),q=async s=>{s.preventDefault();const{data:a,status:g}=await N.get(A+J+`/searchuser=${r.input}/${r.index}`,{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${f}`}});g===200?(S(a),j({input:"",index:"1"})):console.log("An error occurred!")};return e.jsxs("div",{className:"admin-container",style:{gridTemplateColumns:i?"1fr 15fr":"1fr 4fr",gap:i?"0.5rem":"2rem"},children:[e.jsx(K,{isFold:i,setIsFold:h}),e.jsx(G,{isOpen:o,setIsOpen:d}),e.jsx("div",{className:"open-menu-icon",children:e.jsx(O,{size:24,onClick:()=>d(!o)})}),e.jsxs("main",{className:"dashboard",children:[e.jsxs("div",{className:"bar",children:[e.jsxs("form",{onSubmit:q,children:[e.jsx("button",{type:"submit",children:e.jsx(H,{})}),e.jsx("input",{type:"text",placeholder:"Search for data, users, docs",value:r.input,onChange:s=>j({...r,input:s.target.value})}),e.jsxs("div",{className:"select-container",children:[e.jsx("label",{htmlFor:"select",children:"Search By:"}),e.jsxs("select",{value:r.index,id:"select",onChange:s=>j({...r,index:s.target.value}),children:[e.jsx("option",{value:1,children:"Username"}),e.jsx("option",{value:2,children:"Email"})]})]})]}),e.jsx(T,{}),e.jsx("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSXPodEp1Zyixlyx1Rrq6JJlPm0hgg1pFeLNrxgt2bkYw&s",alt:"User"})]}),e.jsx("div",{className:"table-container",children:e.jsxs("div",{className:"dashboard-category-box",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("h2",{className:"heading",children:"List of Accounts"}),e.jsx("button",{style:{backgroundColor:"transparent",outline:"none",border:"none",fontSize:"20px",color:"rgb(0,115,255)"},onClick:y,children:"Refresh"})]}),k&&e.jsx("span",{children:"Loading..."}),x&&e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[_.map(s=>e.jsx("th",{children:e.jsxs("div",{className:"th-wrapper",children:[s.Header,e.jsx(Z,{columnKey:s.value,onClick:()=>$(s.value),sortOrder:u,sortKey:m})]})},s.value)),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:F().slice((n-1)*l,(n-1)*l+l).map((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:a+1}),e.jsx("td",{children:s.username}),e.jsx("td",{children:s.email}),e.jsx("td",{children:e.jsx("img",{style:{borderRadius:"50%"},src:s.imageUrl,alt:s.username})}),e.jsxs("td",{className:"btn-wrapper",style:{display:"flex",alignItems:"center",height:"100px"},children:[e.jsx(C,{className:"bg-blue",to:`/admin/account/read/${s.id}`,children:"Read"}),e.jsx(C,{className:"bg-red",to:`/admin/account/delete/${s.id}`,children:"Delete"})]})]},a))})]}),e.jsx(Y,{totalPages:p,page:n,limit:l,siblings:1,onPageChange:E}),I&&e.jsx("span",{className:"red",children:"Có lỗi khi tải"})]})})]})]})};export{se as default};
