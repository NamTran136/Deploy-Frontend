import{r as t,b as C,j as e,L as c,_ as r,a as y,A as P,h as S}from"./index-BSbp0FSU.js";import{O as E}from"./OAuth-awIQA6Ii.js";import"./firebase-DDMDz6z8.js";function V(){const d={username:"",email:"",password:""},[a,i]=t.useState(d),[h,u]=t.useState(""),[l,o]=t.useState(!1),[p,g]=t.useState(!0),[m,x]=t.useState(!0),j=C(),k=s=>{i({...a,[s.target.id]:s.target.value})},w=async s=>{if(s.preventDefault(),a.password!==h){r.error("Mật khẩu nhập lại không chính xác!");return}try{o(!1);const{status:n}=await y.post(`${P}${S}/register`,a,{headers:{"Content-Type":"application/json",Accept:"application/json"}});if(n!==200){r.error("Đăng ký tài khoản thất bại!");return}r.success("Đăng ký thành công!"),j("/signin")}catch{o(!1),r.error("Username hoặc email đã tồn tại!")}},f=s=>{i({...a,email:s.target.value}),g(b(s.target.value))},v=s=>{i({...a,password:s.target.value}),x(N(s.target.value))},b=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s),N=s=>/^[^\s!@#$%^&*()_+{}|:"<>?`~\-=\\[\];',.\/]{6,}$/.test(s);return e.jsxs("div",{className:"sign-in",children:[e.jsx("h1",{className:"title",children:"Đăng ký"}),e.jsxs("form",{onSubmit:w,className:"form",children:[e.jsx("input",{required:!0,type:"text",placeholder:"Tên đăng nhập",id:"username",onChange:k}),e.jsx("input",{required:!0,type:"email",placeholder:"Email",id:"email",onChange:f}),!p&&e.jsx("p",{className:"red",children:"Địa chỉ email không hợp lệ"}),e.jsx("input",{required:!0,type:"password",placeholder:"Mật khẩu",id:"password",onChange:v}),!m&&e.jsx("p",{className:"red",children:"Mật khẩu phải có ít nhất 6 ký tự và không chứa ký tự đặc biệt"}),e.jsx("input",{required:!0,type:"password",placeholder:"Nhập lại mật khẩu",id:"repeatPassword",onChange:s=>u(s.target.value)}),e.jsx("button",{disabled:l,children:l?"Loading...":"Đăng ký"}),e.jsx(E,{})]}),e.jsxs("div",{className:"sub-signin",children:[e.jsx("p",{children:"Bạn đã có tài khoản."}),e.jsx(c,{to:"/signin",children:e.jsx("span",{className:"blue",children:"Đăng nhập"})})]}),e.jsx("div",{className:"sub-signin",children:e.jsx(c,{to:"/",children:e.jsx("span",{className:"blue",children:"Quay lại trang chủ"})})})]})}export{V as default};
