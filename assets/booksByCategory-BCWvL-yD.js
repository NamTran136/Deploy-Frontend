import{n as I,r as e,a as S,A as y,B as T,C as q,j as t,L as A}from"./index-BSbp0FSU.js";import{S as D,M as K}from"./Menu-Y_NbBSX3.js";import{T as M}from"./Title-DvW9DyvO.js";import{P as O}from"./Pagination-Cu-JZCf2.js";import"./index-DRhXAqaf.js";const _=()=>{const{categoryId:c}=I(),[E,g]=e.useState(!1),[L,d]=e.useState(null),[l,h]=e.useState([]),[f,m]=e.useState(""),[P,u]=e.useState(!1),[x,j]=e.useState(null),[p,C]=e.useState([]),[a,i]=e.useState(1),[o]=e.useState(12),[r,b]=e.useState(0);e.useEffect(()=>{N(),k()},[c]),e.useEffect(()=>{C(l.slice((a-1)*o,(a-1)*o+o))},[l]);const k=()=>{g(!0),h([]),S.get(y+T+"/category/"+c).then(s=>{const n=s.data;h(n),b(Math.ceil(n.length/o)),d(null)}).catch(s=>{d("Không có sách nào"),console.log(s)}).finally(()=>{g(!1)})},N=()=>{u(!0),m(""),S.get(y+q+"/"+c).then(s=>{const n=s.data;m(n.name),j(null)}).catch(s=>{j("Không có thể loại nào tương ứng với ID"+c),console.log(s)}).finally(()=>{u(!1)})};function B(s){s==="&laquo;"||s==="... "?i(1):s==="&lsaquo;"?a!==1&&i(a-1):s==="&rsaquo;"?a!==r&&i(a+1):s==="&raquo;"||s===" ..."?i(r):typeof s=="number"&&i(s)}return e.useEffect(()=>{C(l.slice((a-1)*o,(a-1)*o+o))},[a]),t.jsxs("div",{className:"allBook-container",children:[t.jsxs("div",{className:"allBook-content",children:[!P&&t.jsx(M,{text:x||f}),t.jsxs("div",{className:"list-book",children:[E&&t.jsx("span",{children:"Loading..."}),p.length>0&&p.map((s,n)=>t.jsx("div",{className:"book-item",children:t.jsxs(A,{to:`/book/${s.id}`,children:[t.jsx("img",{src:s.imageUrl,alt:s.title}),t.jsx("div",{children:s.title})]})},n))]}),L&&t.jsxs("span",{className:"red",children:["Thể loại ",f," hiện tại chưa có sách"]}),t.jsx(O,{totalPages:r,page:a,limit:o,siblings:1,onPageChange:B})]}),t.jsx("div",{className:"sub-item-container",children:t.jsx(D,{})}),t.jsx("div",{className:"menu-container",children:t.jsx(K,{})})]})};export{_ as default};
