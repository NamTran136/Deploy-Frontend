import{r as b,c as U,j as h,L as V,S as H,V as K,a as z,A as q,v as W,_ as T}from"./index-BSbp0FSU.js";var P={exports:{}},G="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",$=G,Y=$;function R(){}function M(){}M.resetWarningCache=R;var J=function(){function t(i,a,c,e,s,u){if(u!==Y){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function o(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:o,element:t,elementType:t,instanceOf:o,node:t,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:M,resetWarningCache:R};return r.PropTypes=r,r};P.exports=J();var n=P.exports,w=function(){return w=Object.assign||function(t){for(var o,r=1,i=arguments.length;r<i;r++){o=arguments[r];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a])}return t},w.apply(this,arguments)},A={onActivate:n.func,onAddUndo:n.func,onBeforeAddUndo:n.func,onBeforeExecCommand:n.func,onBeforeGetContent:n.func,onBeforeRenderUI:n.func,onBeforeSetContent:n.func,onBeforePaste:n.func,onBlur:n.func,onChange:n.func,onClearUndos:n.func,onClick:n.func,onContextMenu:n.func,onCommentChange:n.func,onCompositionEnd:n.func,onCompositionStart:n.func,onCompositionUpdate:n.func,onCopy:n.func,onCut:n.func,onDblclick:n.func,onDeactivate:n.func,onDirty:n.func,onDrag:n.func,onDragDrop:n.func,onDragEnd:n.func,onDragGesture:n.func,onDragOver:n.func,onDrop:n.func,onExecCommand:n.func,onFocus:n.func,onFocusIn:n.func,onFocusOut:n.func,onGetContent:n.func,onHide:n.func,onInit:n.func,onInput:n.func,onKeyDown:n.func,onKeyPress:n.func,onKeyUp:n.func,onLoadContent:n.func,onMouseDown:n.func,onMouseEnter:n.func,onMouseLeave:n.func,onMouseMove:n.func,onMouseOut:n.func,onMouseOver:n.func,onMouseUp:n.func,onNodeChange:n.func,onObjectResizeStart:n.func,onObjectResized:n.func,onObjectSelected:n.func,onPaste:n.func,onPostProcess:n.func,onPostRender:n.func,onPreProcess:n.func,onProgressState:n.func,onRedo:n.func,onRemove:n.func,onReset:n.func,onSaveContent:n.func,onSelectionChange:n.func,onSetAttrib:n.func,onSetContent:n.func,onShow:n.func,onSubmit:n.func,onUndo:n.func,onVisualAid:n.func,onSkinLoadError:n.func,onThemeLoadError:n.func,onModelLoadError:n.func,onPluginLoadError:n.func,onIconsLoadError:n.func,onLanguageLoadError:n.func,onScriptsLoad:n.func,onScriptsLoadError:n.func},Q=w({apiKey:n.string,licenseKey:n.string,id:n.string,inline:n.bool,init:n.object,initialValue:n.string,onEditorChange:n.func,value:n.string,tagName:n.string,cloudChannel:n.string,plugins:n.oneOfType([n.string,n.array]),toolbar:n.oneOfType([n.string,n.array]),disabled:n.bool,textareaName:n.string,tinymceScriptSrc:n.oneOfType([n.string,n.arrayOf(n.string),n.arrayOf(n.shape({src:n.string,async:n.bool,defer:n.bool}))]),rollback:n.oneOfType([n.number,n.oneOf([!1])]),scriptLoading:n.shape({async:n.bool,defer:n.bool,delay:n.number})},A),_=function(t){return typeof t=="function"},O=function(t){return t in A},L=function(t){return t.substr(2)},X=function(t,o,r,i,a,c,e){var s=Object.keys(a).filter(O),u=Object.keys(c).filter(O),d=s.filter(function(l){return c[l]===void 0}),p=u.filter(function(l){return a[l]===void 0});d.forEach(function(l){var f=L(l),m=e[f];r(f,m),delete e[f]}),p.forEach(function(l){var f=i(t,l),m=L(l);e[m]=f,o(m,f)})},Z=function(t,o,r,i,a){return X(a,t.on.bind(t),t.off.bind(t),function(c,e){return function(s){var u;return(u=c(e))===null||u===void 0?void 0:u(s,t)}},o,r,i)},I=0,F=function(t){var o=Date.now(),r=Math.floor(Math.random()*1e9);return I++,t+"_"+r+I+String(o)},N=function(t){return t!==null&&(t.tagName.toLowerCase()==="textarea"||t.tagName.toLowerCase()==="input")},B=function(t){return typeof t>"u"||t===""?[]:Array.isArray(t)?t:t.split(" ")},ee=function(t,o){return B(t).concat(B(o))},ne=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},te=function(t){if(!("isConnected"in Node.prototype)){for(var o=t,r=t.parentNode;r!=null;)o=r,r=o.parentNode;return o===t.ownerDocument}return t.isConnected},D=function(t,o){t!==void 0&&(t.mode!=null&&typeof t.mode=="object"&&typeof t.mode.set=="function"?t.mode.set(o):t.setMode(o))},x=function(){return x=Object.assign||function(t){for(var o,r=1,i=arguments.length;r<i;r++){o=arguments[r];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a])}return t},x.apply(this,arguments)},re=function(t,o,r){var i,a,c=t.createElement("script");c.referrerPolicy="origin",c.type="application/javascript",c.id=o.id,c.src=o.src,c.async=(i=o.async)!==null&&i!==void 0?i:!1,c.defer=(a=o.defer)!==null&&a!==void 0?a:!1;var e=function(){c.removeEventListener("load",e),c.removeEventListener("error",s),r(o.src)},s=function(u){c.removeEventListener("load",e),c.removeEventListener("error",s),r(o.src,u)};c.addEventListener("load",e),c.addEventListener("error",s),t.head&&t.head.appendChild(c)},oe=function(t){var o={},r=function(e,s){var u=o[e];u.done=!0,u.error=s;for(var d=0,p=u.handlers;d<p.length;d++){var l=p[d];l(e,s)}u.handlers=[]},i=function(e,s,u){var d=function(E){return u!==void 0?u(E):console.error(E)};if(e.length===0){d(new Error("At least one script must be provided"));return}for(var p=0,l=!1,f=function(E,j){l||(j?(l=!0,d(j)):++p===e.length&&s())},m=0,v=e;m<v.length;m++){var g=v[m],y=o[g.src];if(y)y.done?f(g.src,y.error):y.handlers.push(f);else{var C=F("tiny-");o[g.src]={id:C,src:g.src,done:!1,error:null,handlers:[f]},re(t,x({id:C},g),r)}}},a=function(){for(var e,s=0,u=Object.values(o);s<u.length;s++){var d=u[s],p=t.getElementById(d.id);p!=null&&p.tagName==="SCRIPT"&&((e=p.parentNode)===null||e===void 0||e.removeChild(p))}o={}},c=function(){return t};return{loadScripts:i,deleteScripts:a,getDocument:c}},ie=function(){var t=[],o=function(a){var c=t.find(function(e){return e.getDocument()===a});return c===void 0&&(c=oe(a),t.push(c)),c},r=function(a,c,e,s,u){var d=function(){return o(a).loadScripts(c,s,u)};e>0?setTimeout(d,e):d()},i=function(){for(var a=t.pop();a!=null;a=t.pop())a.deleteScripts()};return{loadList:r,reinitialize:i}},ae=ie(),k=function(t){var o=t;return o&&o.tinymce?o.tinymce:null},se=function(){var t=function(o,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])},t(o,r)};return function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(o,r);function i(){this.constructor=o}o.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}(),S=function(){return S=Object.assign||function(t){for(var o,r=1,i=arguments.length;r<i;r++){o=arguments[r];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a])}return t},S.apply(this,arguments)},ce=function(t){se(o,t);function o(r){var i,a,c,e=t.call(this,r)||this;return e.rollbackTimer=void 0,e.valueCursor=void 0,e.rollbackChange=function(){var s=e.editor,u=e.props.value;s&&u&&u!==e.currentContent&&s.undoManager.ignore(function(){if(s.setContent(u),e.valueCursor&&(!e.inline||s.hasFocus()))try{s.selection.moveToBookmark(e.valueCursor)}catch{}}),e.rollbackTimer=void 0},e.handleBeforeInput=function(s){if(e.props.value!==void 0&&e.props.value===e.currentContent&&e.editor&&(!e.inline||e.editor.hasFocus()))try{e.valueCursor=e.editor.selection.getBookmark(3)}catch{}},e.handleBeforeInputSpecial=function(s){(s.key==="Enter"||s.key==="Backspace"||s.key==="Delete")&&e.handleBeforeInput(s)},e.handleEditorChange=function(s){var u=e.editor;if(u&&u.initialized){var d=u.getContent();e.props.value!==void 0&&e.props.value!==d&&e.props.rollback!==!1&&(e.rollbackTimer||(e.rollbackTimer=window.setTimeout(e.rollbackChange,typeof e.props.rollback=="number"?e.props.rollback:200))),d!==e.currentContent&&(e.currentContent=d,_(e.props.onEditorChange)&&e.props.onEditorChange(d,u))}},e.handleEditorChangeSpecial=function(s){(s.key==="Backspace"||s.key==="Delete")&&e.handleEditorChange(s)},e.initialise=function(s){var u,d,p;s===void 0&&(s=0);var l=e.elementRef.current;if(l){if(!te(l)){if(s===0)setTimeout(function(){return e.initialise(1)},1);else if(s<100)setTimeout(function(){return e.initialise(s+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var f=k(e.view);if(!f)throw new Error("tinymce should have been loaded into global scope");var m=S(S(S(S({},e.props.init),{selector:void 0,target:l,readonly:e.props.disabled,inline:e.inline,plugins:ee((u=e.props.init)===null||u===void 0?void 0:u.plugins,e.props.plugins),toolbar:(d=e.props.toolbar)!==null&&d!==void 0?d:(p=e.props.init)===null||p===void 0?void 0:p.toolbar}),e.props.licenseKey?{license_key:e.props.licenseKey}:{}),{setup:function(v){e.editor=v,e.bindHandlers({}),e.inline&&!N(l)&&v.once("PostRender",function(g){v.setContent(e.getInitialValue(),{no_events:!0})}),e.props.init&&_(e.props.init.setup)&&e.props.init.setup(v)},init_instance_callback:function(v){var g,y,C=e.getInitialValue();e.currentContent=(g=e.currentContent)!==null&&g!==void 0?g:v.getContent(),e.currentContent!==C&&(e.currentContent=C,v.setContent(C),v.undoManager.clear(),v.undoManager.add(),v.setDirty(!1));var E=(y=e.props.disabled)!==null&&y!==void 0?y:!1;D(e.editor,E?"readonly":"design"),e.props.init&&_(e.props.init.init_instance_callback)&&e.props.init.init_instance_callback(v)}});e.inline||(l.style.visibility=""),N(l)&&(l.value=e.getInitialValue()),f.init(m)}},e.id=e.props.id||F("tiny-react"),e.elementRef=b.createRef(),e.inline=(c=(i=e.props.inline)!==null&&i!==void 0?i:(a=e.props.init)===null||a===void 0?void 0:a.inline)!==null&&c!==void 0?c:!1,e.boundHandlers={},e}return Object.defineProperty(o.prototype,"view",{get:function(){var r,i;return(i=(r=this.elementRef.current)===null||r===void 0?void 0:r.ownerDocument.defaultView)!==null&&i!==void 0?i:window},enumerable:!1,configurable:!0}),o.prototype.componentDidUpdate=function(r){var i=this,a,c;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(r),this.editor.initialized)){if(this.currentContent=(a=this.currentContent)!==null&&a!==void 0?a:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==r.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var e=this.editor;e.undoManager.transact(function(){var u;if(!i.inline||e.hasFocus())try{u=e.selection.getBookmark(3)}catch{}var d=i.valueCursor;if(e.setContent(i.props.value),!i.inline||e.hasFocus())for(var p=0,l=[u,d];p<l.length;p++){var f=l[p];if(f)try{e.selection.moveToBookmark(f),i.valueCursor=f;break}catch{}}})}if(this.props.disabled!==r.disabled){var s=(c=this.props.disabled)!==null&&c!==void 0?c:!1;D(this.editor,s?"readonly":"design")}}},o.prototype.componentDidMount=function(){var r=this,i,a,c,e,s;if(k(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(a=(i=this.props).onScriptsLoadError)===null||a===void 0||a.call(i,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((c=this.elementRef.current)===null||c===void 0)&&c.ownerDocument){var u=function(){var p,l;(l=(p=r.props).onScriptsLoad)===null||l===void 0||l.call(p),r.initialise()},d=function(p){var l,f;(f=(l=r.props).onScriptsLoadError)===null||f===void 0||f.call(l,p)};ae.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(s=(e=this.props.scriptLoading)===null||e===void 0?void 0:e.delay)!==null&&s!==void 0?s:0,u,d)}},o.prototype.componentWillUnmount=function(){var r=this,i=this.editor;i&&(i.off(this.changeEvents(),this.handleEditorChange),i.off(this.beforeInputEvent(),this.handleBeforeInput),i.off("keypress",this.handleEditorChangeSpecial),i.off("keydown",this.handleBeforeInputSpecial),i.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(a){i.off(a,r.boundHandlers[a])}),this.boundHandlers={},i.remove(),this.editor=void 0)},o.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},o.prototype.changeEvents=function(){var r,i,a,c=(a=(i=(r=k(this.view))===null||r===void 0?void 0:r.Env)===null||i===void 0?void 0:i.browser)===null||a===void 0?void 0:a.isIE();return c?"change keyup compositionend setcontent CommentChange":"change input compositionend setcontent CommentChange"},o.prototype.beforeInputEvent=function(){return ne()?"beforeinput SelectionChange":"SelectionChange"},o.prototype.renderInline=function(){var r=this.props.tagName,i=r===void 0?"div":r;return b.createElement(i,{ref:this.elementRef,id:this.id})},o.prototype.renderIframe=function(){return b.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id})},o.prototype.getScriptSources=function(){var r,i,a=(r=this.props.scriptLoading)===null||r===void 0?void 0:r.async,c=(i=this.props.scriptLoading)===null||i===void 0?void 0:i.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:a,defer:c}]:this.props.tinymceScriptSrc.map(function(d){return typeof d=="string"?{src:d,async:a,defer:c}:d});var e=this.props.cloudChannel,s=this.props.apiKey?this.props.apiKey:"no-api-key",u="https://cdn.tiny.cloud/1/".concat(s,"/tinymce/").concat(e,"/tinymce.min.js");return[{src:u,async:a,defer:c}]},o.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},o.prototype.bindHandlers=function(r){var i=this;if(this.editor!==void 0){Z(this.editor,r,this.props,this.boundHandlers,function(s){return i.props[s]});var a=function(s){return s.onEditorChange!==void 0||s.value!==void 0},c=a(r),e=a(this.props);!c&&e?(this.editor.on(this.changeEvents(),this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):c&&!e&&(this.editor.off(this.changeEvents(),this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},o.propTypes=Q,o.defaultProps={cloudChannel:"7"},o}(b.Component);function ue(){const t={content:"",title:"",description:"",file:void 0,time:""},{token:o}=U(l=>l.user),[r,i]=b.useState(t),[a,c]=b.useState(void 0),[e]=b.useState("l6xr8cnip8d1xgcgx2uq0ml4lj6pc2u7dcqlcf2f4kcb627t"),[s,u]=b.useState("");console.log("Value: "),console.log("text: ",s);function d(l){return{__html:l}}const p=async l=>{l.preventDefault(),i({...r,time:K()});const{status:f}=await z.post(q+W+"/UploadFile",r,{headers:{"Content-Type":"multipart/form-data",Accept:"application/json",Authorization:`Bearer ${o}`}});f===200?(T.success("Add a Blog successfully"),i(t),c(void 0)):T.error("Có lỗi xảy ra trong quá trình gửi")};return h.jsxs("div",{className:"create-blog-container",children:[h.jsxs("div",{className:"top-container",children:[h.jsx(V,{to:"/admin/blogs",children:h.jsx(H,{size:25})}),h.jsx("h4",{children:"Create blog"})]}),h.jsxs("form",{onSubmit:p,className:"main-content",children:[a&&h.jsx("img",{className:" w-full rounded-md mb-3 ",src:a?URL.createObjectURL(a):"",alt:"thumbnail"}),h.jsxs("div",{className:"mb-3 input-wrapper",children:[h.jsx("label",{htmlFor:"file",children:"Upload thumbnail"}),h.jsx("input",{type:"file",id:"file",onChange:l=>{l.target.files&&(i({...r,file:l.target.files[0]}),c(l.target.files[0]))}})]}),h.jsxs("div",{className:"mb-3 input-wrapper",children:[h.jsx("label",{htmlFor:"title",children:"Title"}),h.jsx("input",{id:"title",placeholder:"Enter Your Title",name:"title",value:r.title,type:"text",className:"input-text",onChange:l=>i({...r,title:l.target.value})})]}),h.jsxs("div",{className:"mb-3 input-wrapper",children:[h.jsx("label",{htmlFor:"description",children:"Description"}),h.jsx("input",{type:"text",id:"description",value:r.description,placeholder:"Enter Your description",name:"description",className:"input-text",onChange:l=>i({...r,description:l.target.value})})]}),h.jsx("div",{className:"mb-3",children:h.jsx(ce,{apiKey:e,onEditorChange:(l,f)=>{i({...r,content:l}),u(f.getContent({format:"text"}))},onInit:(l,f)=>{u(f.getContent({format:"text"})),console.log(l)},init:{plugins:"a11ychecker advcode advlist advtable anchor autocorrect autolink autoresize autosave casechange charmap checklist code codesample directionality editimage emoticons export footnotes formatpainter fullscreen help image importcss inlinecss insertdatetime link linkchecker lists media mediaembed mentions mergetags nonbreaking pagebreak pageembed permanentpen powerpaste preview quickbars save searchreplace table tableofcontents template  tinydrive tinymcespellchecker typography visualblocks visualchars wordcount",toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | numlist bullist indent outdent | emoticons charmap | removeformat"},value:r.content})}),h.jsx("button",{type:"submit",className:"btn-save",children:"Save"}),h.jsxs("div",{className:"preview-section mb-3",children:[h.jsx("h1",{children:"Preview"}),h.jsx("div",{className:"content",children:h.jsx("div",{className:"main-content",dangerouslySetInnerHTML:d(r.content)})})]})]})]})}export{ue as default};
