import{r as t,c as I,a as M,A as R,p as w,j as e,x as B,y as D,z as O,L as f}from"./index-BSbp0FSU.js";import{A as z,a as T}from"./AdminSidebarMobile-4DVHEuT3.js";import{F as $}from"./index-C9NtNJBW.js";import{P as J}from"./Pagination-Cu-JZCf2.js";function K({sortOrder:n,columnKey:m,sortKey:l,onClick:c}){return e.jsx("button",{onClick:c,className:`${l===m&&n==="desc"?"":"rotate-180"}`,children:e.jsx($,{size:16})})}const G=[{Header:"S.No",value:"id"},{Header:"Content",value:"content"},{Header:"Avatar",value:"imageUrl"},{Header:"Username",value:"username"},{Header:"Book has comments",value:"title"},{Header:"Created At",value:"timeUp"}],Q=()=>{const[n,m]=t.useState(!1),[l,c]=t.useState(!1),{token:g}=I(s=>s.user),[b,p]=t.useState(!1),[h,S]=t.useState([]),[N,y]=t.useState(null),[d,C]=t.useState("asc"),[u,A]=t.useState("id"),[a,i]=t.useState(1),[o]=t.useState(5),[x,v]=t.useState(0);t.useEffect(()=>{L()},[]);const L=async()=>{p(!0),await M.get(R+w,{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${g}`}}).then(s=>s.data).then(s=>{S(s),v(Math.ceil(s.length/o))}).catch(s=>{y("List of Comments unavailable"),console.log(s)}).finally(()=>{p(!1)})};function P(s){s==="&laquo;"||s==="... "?i(1):s==="&lsaquo;"?a!==1&&i(a-1):s==="&rsaquo;"?a!==x&&i(a+1):s==="&raquo;"||s===" ..."?i(x):typeof s=="number"&&i(s)}function k({tableData:s,sortKey:r,reverse:q}){if(!r)return s;const j=s.sort((E,F)=>E[r]>F[r]?1:-1);return q?j.reverse():j}const U=t.useCallback(()=>k({tableData:h,sortKey:u,reverse:d==="desc"}),[h,u,d]);function H(s){C(d==="asc"?"desc":"asc"),A(s)}return e.jsxs("div",{className:"admin-container",style:{gridTemplateColumns:n?"1fr 15fr":"1fr 4fr",gap:n?"0.5rem":"2rem"},children:[e.jsx(z,{isFold:n,setIsFold:m}),e.jsx(T,{isOpen:l,setIsOpen:c}),e.jsx("div",{className:"open-menu-icon",children:e.jsx(B,{size:24,onClick:()=>c(!l)})}),e.jsxs("main",{className:"dashboard",children:[e.jsxs("div",{className:"bar",children:[e.jsx(D,{}),e.jsx("input",{type:"text",placeholder:"Search for data, users, docs"}),e.jsx(O,{}),e.jsx("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSXPodEp1Zyixlyx1Rrq6JJlPm0hgg1pFeLNrxgt2bkYw&s",alt:"User"})]}),e.jsx("div",{className:"table-container",children:e.jsxs("div",{className:"dashboard-category-box",children:[e.jsx("h2",{className:"heading",children:"List of Comments"}),b&&e.jsx("span",{children:"Loading..."}),h&&e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[G.map(s=>e.jsx("th",{children:e.jsxs("div",{className:"th-wrapper",children:[s.Header,e.jsx(K,{columnKey:s.value,onClick:()=>H(s.value),sortOrder:d,sortKey:u})]})},s.value)),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:U().slice((a-1)*o,(a-1)*o+o).map((s,r)=>e.jsxs("tr",{children:[e.jsx("td",{children:r+1}),e.jsx("td",{children:s.content}),e.jsx("td",{children:e.jsx("img",{style:{borderRadius:"50%"},src:s.imageUrl,alt:s.username})}),e.jsx("td",{children:s.username}),e.jsx("td",{children:s.title}),e.jsx("td",{children:s.timeUp}),e.jsxs("td",{className:"btn-wrapper",style:{display:"flex",alignItems:"center",height:"100px"},children:[e.jsx(f,{className:"bg-blue",to:`/admin/comment/read/${s.id}`,children:"Read"}),e.jsx(f,{className:"bg-red",to:`/admin/comment/delete/${s.id}`,children:"Delete"})]})]},r))})]}),e.jsx(J,{totalPages:x,page:a,limit:o,siblings:1,onPageChange:P}),N&&e.jsx("span",{className:"red",children:"Có lỗi khi tải"})]})})]})]})};export{Q as default};
