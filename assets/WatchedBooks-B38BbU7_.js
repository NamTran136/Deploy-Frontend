import{c as k,r as a,a as L,A as P,W as A,j as e,L as B}from"./index-BSbp0FSU.js";import{S as E,M as b}from"./Menu-Y_NbBSX3.js";import{T as y}from"./Title-DvW9DyvO.js";import{P as C}from"./Pagination-Cu-JZCf2.js";import"./index-DRhXAqaf.js";const W=()=>{const{user:u,token:f}=k(s=>s.user),[x,r]=a.useState(!1),[c,j]=a.useState([]),[p,h]=a.useState(null),[d,m]=a.useState([]),[t,i]=a.useState(1),[n]=a.useState(12),[l,g]=a.useState(0);a.useEffect(()=>{S()},[]),a.useEffect(()=>{m(c.slice((t-1)*n,(t-1)*n+n))},[c]);const S=async()=>{r(!0),await L.get(P+A+`/${u.email}`,{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${f}`}}).then(s=>{const o=s.data;j(o),g(Math.ceil(o.length/n)),h(null)}).catch(s=>{h("Không có sách nào"),console.log(s)}).finally(()=>{r(!1)})};function N(s){s==="&laquo;"||s==="... "?i(1):s==="&lsaquo;"?t!==1&&i(t-1):s==="&rsaquo;"?t!==l&&i(t+1):s==="&raquo;"||s===" ..."?i(l):typeof s=="number"&&i(s)}return a.useEffect(()=>{m(c.slice((t-1)*n,(t-1)*n+n))},[t]),e.jsxs("div",{className:"allBook-container",children:[e.jsxs("div",{className:"allBook-content",children:[e.jsx(y,{text:"Sách đã xem"}),x&&e.jsx("span",{children:"Loading..."}),p&&e.jsx("span",{className:"red mt-2",children:"Hiện tại chưa có sách yêu thích"}),e.jsx("div",{className:"list-watched-book",children:d.length>0&&d.map((s,o)=>e.jsxs(B,{to:`/book/${s.id}`,className:"watched-book-item",children:[e.jsx("img",{src:s.imageUrl,alt:s.title}),e.jsxs("div",{className:"watched-book-content",children:[e.jsx("h2",{children:s.title}),e.jsx("div",{children:s.author}),e.jsxs("div",{children:["Lần đọc gần nhất: ",s.createdAt]})]})]},o))}),e.jsx(C,{totalPages:l,page:t,limit:n,siblings:1,onPageChange:N})]}),e.jsx("div",{className:"sub-item-container",children:e.jsx(E,{})}),e.jsx("div",{className:"menu-container",children:e.jsx(b,{})})]})};export{W as default};
